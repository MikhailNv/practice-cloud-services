## Цель работы:
Создать плохой и хороший Dockerfile.

## Задачи:
* Написать плохой работающий Dockerfile и описать плохие практики, использующиеся в нем;
* Написать хороший Dockerfile, с исправленными плохими практиками;
* Описать плохие практики по использованию созданных контейнеров.

## Ход работы
### Dockerfile - плохой

Наш плохой Dockerfile запускается и работает корректно, однако в нем использованы плохие практики написания подобных файлов.

Разберем содержимое плохого Dockerfile (Dockerfile_d):

![png1](./images/1.png)

1. Строка №1.
  ```
  FROM ubuntu:latest
  ```
  В данной строке мы указываем инструкцию "FROM", которая сообщает Docker о том, чтобы при сборке образа использовался бы базовый образ, который соответствует предоставленному имени и тегу. В нашем случае указано просто имя обюраза - ubuntu. Это плохая практика.
   * Начнем с того, что указывать имя без тега уже плохо. Ведь описанная сборка может жестко зависеть от версии образа ОС, что может в будущем повлечь за собой непредвиденные ошибки;
   * Основная функция нашего Dockerfile - это запуск Python-скрипта, который выводит информацию об окружении системы. Для этого нам нужен просто установленный интерпретатор Python и сама ОС. Для этого не обязательно брать большие по объему образы. Наоборот, меньшие образы более модульны и безопасны, а также с ними создание, отправка и извлечение изображений будет происходить быстрее.
3. Строка №5. В данной строке мы указываем инструкцию "ADD", которая позволяет брать файлы и папки из контекста сборки и добавить их в текущую рабочую директорию образа. В нашем случае для данного пункта задействовано несколько плохих практик.
   * Существуют похожие инструкции "ADD" и "COPY". Вторая позволяет добавлять только локальные папки и файлы. Первая же дает возможность добавлять те же объекты, только с удаленных ресурсов, а также добавлять различные архивы. В нашем случае не задействуется дополнительный функционал инструкции "ADD" и мы можем выполнить те же действия при помощи "COPY", что будет более правильным решением.
   * Мы копируем из локальной директории все находящиеся в ней данные рекурсивно. Этого не стоит делать. Лучше указывать конкретные имена файлов, ведь такой подход, к примеру, помогает ограничить разрушение кеша.
4. Строки №7 и №8. В данных строках мы указываем инструкцию "RUN", которая позволяет создать слой во время сборки образа. Каждый слой увеличивает размер изображения, поскольку они кэшируются. Следовательно, с увеличением количества слоев увеличивается и размер. Лучше объединять команды в данной инструкции.
5. Строка №10. В данной строке мы используем инструкцию "CMD", которая предоставляет Docker команду, выполняющуюся при запуске контейнера. Данной инструкции мы передаем команду в виде строки, это неправильно. В самой документации Docker говорится следующее: "Использование строковой формы приводит к тому, что Docker запускает ваш процесс с использованием bash, который неправильно обрабатывает сигналы". Помимо того, параметры инструкции "CMD" легко изменить, передав при запуске контейнера новые данные. Например, вот так:

![png2](./images/2.png)

Как видно, мы сломали нашу программу. В связи с этим рекомендуется использовать инструкцию "CMD" совместно с "ENTRYPOINT", переопределение которой возможно при указании специального ключа --entrypoint, что снизит риск случайных ошибок.
